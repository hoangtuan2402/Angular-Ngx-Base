{"version":3,"file":"ngx-lite-input-star-rating.umd.js","sources":["../../../projects/ngx-input-star-rating/src/ngx-input-star-rating.component.ts","../../../projects/ngx-input-star-rating/src/ngx-input-star-rating.component.html","../../../projects/ngx-input-star-rating/src/ngx-input-star-rating.module.ts","../../../projects/ngx-input-star-rating/src/public_api.ts","../../../projects/ngx-input-star-rating/src/ngx-lite-input-star-rating.ts"],"sourcesContent":["import {\n  forwardRef,\n  Component,\n  Input,\n  OnChanges,\n  OnInit,\n  SimpleChanges,\n  ViewEncapsulation,\n  ChangeDetectionStrategy,\n} from '@angular/core';\nimport { ControlValueAccessor, NG_VALUE_ACCESSOR } from '@angular/forms';\n\nconst starIcons = {\n  outline: 'outline',\n  full: 'full',\n  half: 'half',\n};\n\n@Component({\n  selector: 'ngx-input-star-rating',\n  templateUrl: './ngx-input-star-rating.component.html',\n  styleUrls: ['./ngx-input-star-rating.component.scss'],\n  changeDetection: ChangeDetectionStrategy.OnPush,\n  providers: [\n    {\n      provide: NG_VALUE_ACCESSOR,\n      useExisting: forwardRef(() => NgxInputStarRatingComponent),\n      multi: true,\n    },\n  ],\n  encapsulation: ViewEncapsulation.None,\n})\nexport class NgxInputStarRatingComponent\n  implements ControlValueAccessor, OnInit, OnChanges {\n  get value() {\n    return this._value;\n  }\n\n  set value(val) {\n    this._value = val;\n    this.onChange(val);\n    this.valueUpdate(this._value);\n    this.onTouched();\n  }\n\n  @Input('value') _value = 0;\n  @Input() count = 5;\n  @Input() disabled = false;\n\n  readonly starIcons = starIcons;\n\n  buttons: { active: boolean; icon: string }[] = [];\n\n  // tslint:disable-next-line:no-empty\n  onChange = (_value: number) => {};\n\n  // tslint:disable-next-line:no-empty\n  onTouched = () => {};\n\n  registerOnChange(fn: (value: number) => void) {\n    this.onChange = fn;\n  }\n\n  registerOnTouched(fn: () => void) {\n    this.onTouched = fn;\n  }\n\n  writeValue(value: number) {\n    if (value !== this.value) {\n      this.value = value;\n    }\n  }\n\n  ngOnInit() {\n    for (let i = 0; i < this.count; i++) {\n      this.buttons.push({ active: false, icon: starIcons.outline });\n    }\n\n    this.valueUpdate(this.value);\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    if (changes.value && changes.value.currentValue) {\n      this.valueUpdate(changes.value.currentValue);\n    }\n  }\n\n  rate(index: number) {\n    this.buttons.forEach((btn, i) => {\n      if (i <= index) {\n        btn.icon = starIcons.full;\n      } else {\n        btn.icon = starIcons.outline;\n      }\n    });\n\n    const total = this.buttons.reduce((prev, next) => {\n      if (next.icon === starIcons.full) {\n        return prev + 1;\n      } else {\n        return prev;\n      }\n    }, 0);\n\n    this.value = total;\n  }\n\n  mouseEnter(index: number) {\n    this.buttons.forEach((btn, i) => {\n      if (i <= index) {\n        btn.active = true;\n      } else {\n        btn.active = false;\n      }\n    });\n  }\n\n  mouseLeave() {\n    this.buttons.forEach((i) => (i.active = false));\n  }\n\n  private valueUpdate(value: number) {\n    this.buttons.forEach((btn, i) => {\n      const starValue = i + 1;\n\n      if (value >= starValue) {\n        btn.icon = starIcons.full;\n      }\n\n      if (value >= starValue - 0.5 && value < starValue) {\n        btn.icon = starIcons.half;\n      }\n    });\n  }\n}\n","<div class=\"ngx-input-rating\" (mouseleave)=\"mouseLeave()\">\n  <button type=\"button\" [disabled]=\"disabled\" *ngFor=\"let btn of buttons; let i = index\" class=\"ngx-input-rating__btn\" (click)=\"rate(i)\" [attr.aria-label]=\"'rate ' + (i + 1) + ' of ' + buttons.length\"\n    (mouseenter)=\"mouseEnter(i)\" class=\"ngx-input-star-rating__btn\">\n    <span *ngIf=\"btn.active || btn.icon === starIcons.full\" class=\"ngx-input-star-rating__full\">\n      <ng-container *ngTemplateOutlet=\"star\"></ng-container>\n    </span>\n    <ng-container *ngIf=\"!btn.active\">\n      <span *ngIf=\"btn.icon === starIcons.half\" class=\"ngx-input-star-rating__half\">\n        <ng-container *ngTemplateOutlet=\"star\"></ng-container>\n        <svg height=\"25\" width=\"10\" class=\"ngx-input-star-rating__star-half\">\n          <polygon points=\"9.9, 1.1, 3.3, 21.78, 19.8, 8.58, 0, 8.58, 16.5, 21.78\" style=\"fill-rule:nonzero;\"/>\n        </svg>\n      </span>\n      <span *ngIf=\"btn.icon !== starIcons.full && btn.icon !== starIcons.half\" class=\"empty\">\n        <ng-container *ngTemplateOutlet=\"star\"></ng-container>\n      </span>\n    </ng-container>\n  </button>\n</div>\n\n<ng-template #star>\n  <svg height=\"25\" width=\"23\" class=\"ngx-input-star-rating__star\">\n    <polygon points=\"9.9, 1.1, 3.3, 21.78, 19.8, 8.58, 0, 8.58, 16.5, 21.78\" style=\"fill-rule:nonzero;\"/>\n  </svg>\n</ng-template>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { NgxInputStarRatingComponent } from './ngx-input-star-rating.component';\n\n@NgModule({\n  imports: [CommonModule],\n  declarations: [NgxInputStarRatingComponent],\n  exports: [NgxInputStarRatingComponent],\n})\nexport class NgxInputStarRatingModule {}\n","/*\n * Public API Surface of ngx-input-star-rating\n */\n\nexport * from './ngx-input-star-rating.component';\nexport * from './ngx-input-star-rating.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["NG_VALUE_ACCESSOR","forwardRef","Component","ChangeDetectionStrategy","ViewEncapsulation","Input","CommonModule","NgModule"],"mappings":"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"}