{"version":3,"file":"ngx-filepond.js","sources":["ngx-filepond/filepond.component.ts","ngx-filepond/filepond.module.ts","ngx-filepond/ngx-filepond.ts"],"names":[],"mappings":"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","sourcesContent":["import {\n  Component,\n  ElementRef,\n  SimpleChanges,\n  ViewEncapsulation,\n  EventEmitter,\n  NgZone,\n  Input,\n  Output,\n  AfterViewInit,\n  OnChanges,\n  OnDestroy,\n} from \"@angular/core\";\n\nimport { create, supported, FilePond, FilePondOptions } from \"filepond\";\n\n// We test if filepond is supported on the current client\nconst isSupported: Boolean = supported();\n\n// List of attributes for fallback input\nconst inputAttributes: Array<string> = [\n  \"id\",\n  \"name\",\n  \"class\",\n  \"multiple\",\n  \"required\",\n  \"disabled\",\n  \"capture\",\n  \"accept\",\n];\n\n// Methods not made available on the component\nconst filteredComponentMethods: Array<string> = [\n  \"setOptions\",\n  \"on\",\n  \"off\",\n  \"onOnce\",\n  \"appendTo\",\n  \"insertAfter\",\n  \"insertBefore\",\n  \"isAttachedTo\",\n  \"replaceElement\",\n  \"restoreElement\",\n  \"destroy\",\n];\n\nconst outputs: Array<string> = [\n  \"oninit\",\n  \"onwarning\",\n  \"onerror\",\n  \"onactivatefile\",\n  \"onaddfilestart\",\n  \"onaddfileprogress\",\n  \"onaddfile\",\n  \"onprocessfilestart\",\n  \"onprocessfileprogress\",\n  \"onprocessfileabort\",\n  \"onprocessfilerevert\",\n  \"onprocessfile\",\n  \"onprocessfiles\",\n  \"onremovefile\",\n  \"onpreparefile\",\n  \"onupdatefiles\",\n];\n\n// Component outline\n@Component({\n  selector: \"file-pond\",\n  encapsulation: ViewEncapsulation.None,\n  templateUrl: \"./filepond.component.html\",\n  styleUrls: [\"./filepond.component.css\"],\n})\nexport class FilePondComponent implements AfterViewInit, OnChanges, OnDestroy {\n  @Input()\n  options: FilePondOptions = {};\n\n  @Input()\n  files: FilePondOptions[\"files\"];\n\n  // same as outputs array\n  @Output() oninit = new EventEmitter<any>();\n  @Output() onwarning = new EventEmitter<any>();\n  @Output() onerror = new EventEmitter<any>();\n  @Output() onactivatefile = new EventEmitter<any>();\n  @Output() onaddfilestart = new EventEmitter<any>();\n  @Output() onaddfileprogress = new EventEmitter<any>();\n  @Output() onaddfile = new EventEmitter<any>();\n  @Output() onprocessfilestart = new EventEmitter<any>();\n  @Output() onprocessfileprogress = new EventEmitter<any>();\n  @Output() onprocessfileabort = new EventEmitter<any>();\n  @Output() onprocessfilerevert = new EventEmitter<any>();\n  @Output() onprocessfile = new EventEmitter<any>();\n  @Output() onprocessfiles = new EventEmitter<any>();\n  @Output() onremovefile = new EventEmitter<any>();\n  @Output() onpreparefile = new EventEmitter<any>();\n  @Output() onupdatefiles = new EventEmitter<any>();\n\n  private root: ElementRef;\n  private zone: NgZone;\n  private pond: FilePond;\n  private handleEvent: Function = null;\n\n  constructor(root: ElementRef, zone: NgZone) {\n    this.root = root;\n    this.zone = zone;\n  }\n\n  ngAfterViewInit() {\n    const input = this.root.nativeElement.querySelector(\"input\");\n\n    // transfer relevant attributes to input, this so we still have an input with the correct attributes should file pond not load\n    const attributes = this.root.nativeElement.attributes;\n    inputAttributes.forEach((name) => {\n      const value = attributes[name]\n        ? attributes[name].value\n        : this.options[name];\n      if (!value) {\n        return;\n      }\n      input.setAttribute(name, value);\n    });\n\n    // no sufficient features supported in this browser\n    if (!isSupported) {\n      return;\n    }\n\n    // map FilePond events to Angular @outputs\n    this.handleEvent = (e) => {\n      this[`on${e.type.split(\":\")[1]}`].emit({ ...e.detail });\n    };\n    outputs.forEach((event) => {\n      this.root.nativeElement.addEventListener(\n        `FilePond:${event.substr(2)}`,\n        this.handleEvent\n      );\n    });\n\n    // will block angular from listening to events inside the pond\n    this.zone.runOutsideAngular(() => {\n      // create instance\n      this.pond = create(input, {\n        // our options\n        ...this.options,\n\n        // our initial files\n        files: this.files,\n      });\n    });\n\n    // Copy instance method references to component instance\n    Object.keys(this.pond)\n\n      // remove unwanted methods\n      .filter((key) => filteredComponentMethods.indexOf(key) === -1)\n\n      // set method references from the component instance to the pond instance\n      .forEach((key) => {\n        this[key] = this.pond[key];\n      });\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    // no need to handle first change\n    if (changes.firstChange) {\n      return;\n    }\n\n    // no filepond instance available\n    if (!this.pond) {\n      return;\n    }\n\n    // use new options object as base ( or if not available, use current options )\n    const options = changes.options\n      ? changes.options.currentValue\n      : this.options;\n\n    // see if file list has changed\n    if (\n      changes.files &&\n      JSON.stringify(changes.files.previousValue) !==\n        JSON.stringify(changes.files.currentValue)\n    ) {\n      // file list has changed\n      options.files = changes.files.currentValue;\n    }\n\n    // set new options\n    this.pond.setOptions(options);\n  }\n\n  ngOnDestroy() {\n    if (!this.pond) {\n      return;\n    }\n\n    outputs.forEach((event) => {\n      this.root.nativeElement.removeEventListener(\n        `FilePond:${event.substr(2)}`,\n        this.handleEvent\n      );\n    });\n\n    this.pond.destroy();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { FilePondComponent } from './filepond.component';\n\nexport { registerPlugin } from 'filepond';\n\n@NgModule({\n  imports: [\n    CommonModule\n  ],\n  declarations: [FilePondComponent],\n  exports: [\n    FilePondComponent\n  ]\n})\nexport class FilePondModule { }","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n\nexport {FilePondComponent as ɵa} from './filepond.component';"]}