{"version":3,"file":"xmlking-ngx-knob.js","sources":["../../../projects/knob/src/lib/knob.component.ts","../../../projects/knob/src/lib/knob.module.ts","../../../projects/knob/src/public_api.ts","../../../projects/knob/src/xmlking-ngx-knob.ts"],"sourcesContent":["import { ElementRef, OnInit, Input, Output, EventEmitter, OnChanges, Component } from '@angular/core';\nimport * as d3 from 'd3';\nimport 'd3-selection-multi';\n// https://medium.com/inside-formstack/friends-dont-let-friends-import-lodash-incorrectly-ac40ca9e3bd5\nimport merge from 'lodash-es/merge';\n\nexport interface KnobOptions {\n  skin?: {\n    type: string;\n    width: number;\n    color: string;\n    spaceWidth: number;\n  };\n  animate?: {\n    enabled: true;\n    duration: number;\n    ease: string;\n  };\n  size: number;\n  startAngle: number;\n  endAngle: number;\n  unit: string;\n  displayInput: true;\n  inputFormatter: any;\n  readOnly: boolean;\n  trackWidth: number;\n  barWidth: number;\n  trackColor: string;\n  barColor: string;\n  prevBarColor: string;\n  textColor: string;\n  barCap: number;\n  trackCap: number;\n  fontSize: string;\n  fontWeigth: string;\n  fontFamily: string;\n  valueFormat?: string;\n  subText: {\n    enabled: false;\n    text: '';\n    fontFamily: string;\n    fontWeight: string;\n    color: string;\n    font: string;\n    offset: number;\n  };\n  bgColor: string;\n  bgFull: false;\n  scale: {\n    enabled: false;\n    type: string;\n    color: string;\n    width: number;\n    quantity: number;\n    height: number;\n    spaceWidth: number;\n  };\n  step: number;\n  displayPrevious: false;\n  min: number;\n  max: number;\n  dynamicOptions: false;\n}\n\n@Component({\n  template: '',\n  selector: 'ngx-knob'\n})\nexport class KnobComponent implements OnInit, OnChanges {\n  element: HTMLElement;\n  @Input()\n  value: number;\n  @Input()\n  label: number;\n  @Input()\n  options: any;\n  @Output()\n  valueChange = new EventEmitter<number>();\n\n  inDrag: Boolean;\n  bgArc: any;\n  trackArc: any;\n  changeArc: any;\n  valueArc: any;\n  interactArc: any;\n  hoopArc: any;\n  changeElem: any;\n  valueElem: any;\n  defaultOptions: KnobOptions;\n  animations: any;\n\n  constructor(private el: ElementRef) {\n    // All that need to be instanciated before bindings\n    this.element = this.el.nativeElement;\n    this.value = 0;\n    this.defaultOptions = {\n      skin: {\n        type: 'simple',\n        width: 10,\n        color: 'rgba(255,0,0,.5)',\n        spaceWidth: 5,\n      },\n      animate: {\n        enabled: true,\n        duration: 1000,\n        ease: 'bounce',\n      },\n      size: 200,\n      startAngle: 0,\n      endAngle: 360,\n      unit: '',\n      displayInput: true,\n      inputFormatter: function(v: any) {\n        return v;\n      },\n      readOnly: false,\n      trackWidth: 50,\n      barWidth: 50,\n      trackColor: 'rgba(0,0,0,0)',\n      barColor: 'rgba(255,0,0,.5)',\n      prevBarColor: 'rgba(0,0,0,0)',\n      textColor: '#222',\n      barCap: 0,\n      trackCap: 0,\n      fontSize: 'auto',\n      fontWeigth: '400',\n      fontFamily: 'Arial',\n      valueFormat: 'string',\n      subText: {\n        enabled: false,\n        text: '',\n        fontFamily: 'Arial',\n        fontWeight: 'normal',\n        color: 'gray',\n        font: 'auto',\n        offset: 0,\n      },\n      bgColor: '',\n      bgFull: false,\n      scale: {\n        enabled: false,\n        type: 'lines',\n        color: 'gray',\n        width: 4,\n        quantity: 20,\n        height: 10,\n        spaceWidth: 15,\n      },\n      step: 1,\n      displayPrevious: false,\n      min: 0,\n      max: 100,\n      dynamicOptions: false,\n    };\n\n    this.animations = {\n      linear: d3.easeLinear,\n      bounce: d3.easeBounce,\n    };\n  }\n\n  ngOnInit() {\n    this.inDrag = false;\n    // this.options = (<any>Object).assign(this.defaultOptions, this.options);\n    this.options = merge(this.defaultOptions, this.options);\n    this.draw();\n  }\n\n  ngOnChanges(changes: any) {\n    if (\n      this.defaultOptions != null &&\n      changes.options != null &&\n      changes.options.currentValue != null &&\n      this.value != null\n    ) {\n      this.options = merge(this.defaultOptions, changes.options.currentValue);\n      this.draw();\n    }\n\n    if (\n      this.defaultOptions != null &&\n      this.options != null &&\n      changes.value &&\n      changes.value.currentValue != null &&\n      changes.value.previousValue != null &&\n      changes.value.currentValue !== changes.value.previousValue\n    ) {\n      this.setValue(changes.value.currentValue);\n    }\n  }\n\n  /**\n   *   Convert from value to radians\n   */\n  valueToRadians(\n    value: number,\n    valueEnd: number,\n    angleEnd: number = 0,\n    angleStart: number = 0,\n    valueStart: number = 0,\n  ) {\n    valueEnd = valueEnd || 100;\n    valueStart = valueStart || 0;\n    angleEnd = angleEnd || 360;\n    angleStart = angleStart || 0;\n    return (Math.PI / 180) * (((value - valueStart) * (angleEnd - angleStart)) / (valueEnd - valueStart) + angleStart);\n  }\n\n  /**\n   *   Convert from radians to value\n   */\n  radiansToValue(radians: number, valueEnd: number, valueStart: number, angleEnd: number, angleStart: number) {\n    valueEnd = valueEnd || 100;\n    valueStart = valueStart || 0;\n    angleEnd = angleEnd || 360;\n    angleStart = angleStart || 0;\n    return (((180 / Math.PI) * radians - angleStart) * (valueEnd - valueStart)) / (angleEnd - angleStart) + valueStart;\n  }\n\n  /**\n   *   Create the arc\n   */\n  createArc(\n    innerRadius: number,\n    outerRadius: number,\n    startAngle?: number,\n    endAngle?: number,\n    cornerRadius?: number,\n  ): any {\n    const arc = d3\n      .arc()\n      .innerRadius(innerRadius)\n      .outerRadius(outerRadius)\n      .startAngle(startAngle)\n      .endAngle(endAngle)\n      .cornerRadius(cornerRadius);\n    return arc;\n  }\n\n  /**\n   *   Draw the arc\n   */\n  drawArc(svg: any, arc: any, label: string, style: any, click?: any, drag?: any) {\n    const elem = svg\n      .append('path')\n      .attr('id', label)\n      .attr('d', arc);\n\n    // eslint-disable-next-line guard-for-in\n    for (const key in style) {\n      elem.style(key, style[key]);\n    }\n\n    elem.attr('transform', 'translate(' + this.options.size / 2 + ', ' + this.options.size / 2 + ')');\n\n    if (this.options.readOnly === false) {\n      if (click) {\n        elem.on('click', click);\n      }\n      if (drag) {\n        elem.call(drag);\n      }\n    }\n    return elem;\n  }\n\n  /**\n   *   Create the arcs\n   */\n  createArcs() {\n    let outerRadius = parseInt((this.options.size / 2).toString(), 10);\n    const startAngle = this.valueToRadians(this.options.startAngle, 360);\n    const endAngle = this.valueToRadians(this.options.endAngle, 360);\n    if (this.options.scale.enabled) {\n      outerRadius -= this.options.scale.width + this.options.scale.spaceWidth;\n    }\n    let trackInnerRadius = outerRadius - this.options.trackWidth;\n    let changeInnerRadius = outerRadius - this.options.barWidth;\n    let valueInnerRadius = outerRadius - this.options.barWidth;\n    // interactInnerRadius = outerRadius - this.options.barWidth,\n    const interactInnerRadius = 1;\n\n    let trackOuterRadius = outerRadius;\n    let changeOuterRadius = outerRadius;\n    let valueOuterRadius = outerRadius;\n    let interactOuterRadius = outerRadius;\n    let diff;\n\n    if (this.options.barWidth > this.options.trackWidth) {\n      diff = (this.options.barWidth - this.options.trackWidth) / 2;\n      trackInnerRadius -= diff;\n      trackOuterRadius -= diff;\n    } else if (this.options.barWidth < this.options.trackWidth) {\n      diff = (this.options.trackWidth - this.options.barWidth) / 2;\n      changeOuterRadius -= diff;\n      valueOuterRadius -= diff;\n      changeInnerRadius -= diff;\n      valueInnerRadius -= diff;\n      // interactInnerRadius = outerRadius - this.options.trackWidth;\n    }\n    if (this.options.bgColor) {\n      if (this.options.bgFull) {\n        this.bgArc = this.createArc(0, outerRadius, 0, Math.PI * 2);\n      } else {\n        this.bgArc = this.createArc(0, outerRadius, startAngle, endAngle);\n      }\n    }\n    if (this.options.skin.type === 'tron') {\n      trackOuterRadius = trackOuterRadius - this.options.skin.width - this.options.skin.spaceWidth;\n      changeOuterRadius = changeOuterRadius - this.options.skin.width - this.options.skin.spaceWidth;\n      valueOuterRadius = valueOuterRadius - this.options.skin.width - this.options.skin.spaceWidth;\n      interactOuterRadius = interactOuterRadius - this.options.skin.width - this.options.skin.spaceWidth;\n      this.hoopArc = this.createArc(outerRadius - this.options.skin.width, outerRadius, startAngle, endAngle);\n    }\n\n    this.trackArc = this.createArc(trackInnerRadius, trackOuterRadius, startAngle, endAngle, this.options.trackCap);\n    this.changeArc = this.createArc(changeInnerRadius, changeOuterRadius, startAngle, startAngle, this.options.barCap);\n    this.valueArc = this.createArc(valueInnerRadius, valueOuterRadius, startAngle, startAngle, this.options.barCap);\n    this.interactArc = this.createArc(interactInnerRadius, interactOuterRadius, startAngle, endAngle);\n  }\n\n  /**\n   *   Draw the arcs\n   */\n  drawArcs(clickInteraction: any, dragBehavior: any) {\n    let fontFamily = '';\n    const svg = d3\n      .select(this.element)\n      .append('svg')\n      .attr('width', this.options.size)\n      .attr('height', this.options.size);\n\n    if (this.options.bgColor) {\n      this.drawArc(svg, this.bgArc, 'bgArc', { fill: this.options.bgColor });\n    }\n\n    if (this.options.displayInput) {\n      let fontSize: string = this.options.size * 0.2 + 'px';\n      if (this.options.fontSize !== 'auto') {\n        fontSize = this.options.fontSize + 'px';\n      }\n      if (this.options.step < 1) {\n        this.value = Number(this.value.toFixed(1));\n      }\n      let v = this.label || this.value;\n      if (typeof this.options.inputFormatter === 'function') {\n        v = this.options.inputFormatter(v);\n      }\n\n      if (this.options.fontFamily !== 'Arial') {\n        fontFamily = this.options.fontFamily;\n      }\n      let fontWeigth = '';\n      if (this.options.fontWeigth !== '400') {\n        fontWeigth = this.options.fontWeigth;\n      }\n      svg\n        .append('text')\n        .attr('id', 'text')\n        .attr('class', 'text-value')\n        .attr('text-anchor', 'middle')\n        .attr('font-size', fontSize)\n        .attr('font-weight', fontWeigth)\n        .attr('font-family', fontFamily)\n        .style('fill', this.options.textColor)\n        .text(v + this.options.unit || '')\n        .attr(\n          'transform',\n          'translate(' + this.options.size / 2 + ', ' + (this.options.size / 2 + this.options.size * 0.06) + ')',\n        );\n\n      if (this.options.subText.enabled) {\n        fontSize = this.options.size * 0.07 + 'px';\n        if (this.options.subText.font !== 'auto') {\n          fontSize = this.options.subText.font + 'px';\n        }\n\n        if (this.options.subText.fontFamily !== 'Arial') {\n          fontFamily = this.options.subText.fontFamily;\n        }\n        let fontWeight = '';\n        if (this.options.subText.fontWeight !== 'normal') {\n          fontWeight = this.options.subText.fontWeight;\n        }\n        svg\n          .append('text')\n          .attr('class', 'sub-text')\n          .attr('text-anchor', 'middle')\n          .attr('font-size', fontSize)\n          .attr('font-family', fontFamily)\n          .attr('font-weight', fontWeight)\n          .style('fill', this.options.subText.color)\n          .text(this.options.subText.text)\n          .attr(\n            'transform',\n            'translate(' +\n            '' +\n            this.options.size / 2 +\n            ', ' +\n            (this.options.size / 2 + this.options.size * 0.15 + this.options.subText.offset) +\n            ')',\n          );\n      }\n    }\n    if (this.options.scale.enabled) {\n      let radius: number;\n      let quantity: number;\n      let data;\n      let count = 0;\n      let angle = 0;\n      const startRadians = this.valueToRadians(\n        this.options.min,\n        this.options.max,\n        this.options.endAngle,\n        this.options.startAngle,\n        this.options.min,\n      );\n      const endRadians = this.valueToRadians(\n        this.options.max,\n        this.options.max,\n        this.options.endAngle,\n        this.options.startAngle,\n        this.options.min,\n      );\n      let diff = 0;\n      if (this.options.startAngle !== 0 || this.options.endAngle !== 360) {\n        diff = 1;\n      }\n      if (this.options.scale.type === 'dots') {\n        const width = this.options.scale.width;\n        radius = this.options.size / 2 - width;\n        quantity = this.options.scale.quantity;\n        const offset: number = radius + this.options.scale.width;\n        data = d3.range(quantity).map(function() {\n          angle = count * (endRadians - startRadians) - Math.PI / 2 + startRadians;\n          count = count + 1 / (quantity - diff);\n          return {\n            cx: offset + Math.cos(angle) * radius,\n            cy: offset + Math.sin(angle) * radius,\n            r: width,\n          };\n        });\n        svg\n          .selectAll('circle')\n          .data(data)\n          .enter()\n          .append('circle')\n          // @ts-ignore\n          .attrs({\n            r: function(d: { r: any }) {\n              return d.r;\n            },\n            cx: function(d: { cx: number }) {\n              return d.cx;\n            },\n            cy: function(d: { cy: number }) {\n              return d.cy;\n            },\n            fill: this.options.scale.color,\n          });\n      } else if (this.options.scale.type === 'lines') {\n        const height = this.options.scale.height;\n        radius = this.options.size / 2;\n        quantity = this.options.scale.quantity;\n        data = d3.range(quantity).map(function() {\n          angle = count * (endRadians - startRadians) - Math.PI / 2 + startRadians;\n          count = count + 1 / (quantity - diff);\n          return {\n            x1: radius + Math.cos(angle) * radius,\n            y1: radius + Math.sin(angle) * radius,\n            x2: radius + Math.cos(angle) * (radius - height),\n            y2: radius + Math.sin(angle) * (radius - height),\n          };\n        });\n\n        svg\n          .selectAll('line')\n          .data(data)\n          .enter()\n          .append('line')\n          // @ts-ignore\n          .attrs({\n            x1: function(d: { x1: number }) {\n              return d.x1;\n            },\n            y1: function(d: { y1: number }) {\n              return d.y1;\n            },\n            x2: function(d: { x2: number }) {\n              return d.x2;\n            },\n            y2: function(d: { y2: number }) {\n              return d.y2;\n            },\n            'stroke-width': this.options.scale.width,\n            stroke: this.options.scale.color,\n          });\n      }\n    }\n    if (this.options.skin.type === 'tron') {\n      this.drawArc(svg, this.hoopArc, 'hoopArc', { fill: this.options.skin.color });\n    }\n    this.drawArc(svg, this.trackArc, 'trackArc', { fill: this.options.trackColor });\n    if (this.options.displayPrevious) {\n      this.changeElem = this.drawArc(svg, this.changeArc, 'changeArc', { fill: this.options.prevBarColor });\n    } else {\n      this.changeElem = this.drawArc(svg, this.changeArc, 'changeArc', { 'fill-opacity': 0 });\n    }\n    this.valueElem = this.drawArc(svg, this.valueArc, 'valueArc', { fill: this.options.barColor });\n    let cursor = 'pointer';\n    if (this.options.readOnly) {\n      cursor = 'default';\n    }\n    this.drawArc(\n      svg,\n      this.interactArc,\n      'interactArc',\n      { 'fill-opacity': 0, cursor: cursor },\n      clickInteraction,\n      dragBehavior,\n    );\n  }\n\n  /**\n   *   Draw knob component\n   */\n  draw() {\n    d3.select(this.element)\n      .select('svg')\n      .remove();\n    const that = this;\n\n    that.createArcs();\n\n    const dragBehavior = d3\n      .drag()\n      .on('drag', dragInteraction)\n      .on('end', clickInteraction);\n\n    that.drawArcs(clickInteraction, dragBehavior);\n\n    if (that.options.animate.enabled) {\n      // that.valueElem.transition().ease(that.options.animate.ease).duration(that.options.animate.duration).tween('', function () {\n      that.valueElem\n        .transition()\n        .ease(that.animations[that.options.animate.ease])\n        .duration(that.options.animate.duration)\n        .tween('', function() {\n          const i = d3.interpolate(\n            that.valueToRadians(that.options.startAngle, 360),\n            that.valueToRadians(\n              that.value,\n              that.options.max,\n              that.options.endAngle,\n              that.options.startAngle,\n              that.options.min,\n            ),\n          );\n          return function(t: any) {\n            const val = i(t);\n            that.valueElem.attr('d', that.valueArc.endAngle(val));\n            that.changeElem.attr('d', that.changeArc.endAngle(val));\n          };\n        });\n    } else {\n      that.changeArc.endAngle(\n        this.valueToRadians(\n          this.value,\n          this.options.max,\n          this.options.endAngle,\n          this.options.startAngle,\n          this.options.min,\n        ),\n      );\n      that.changeElem.attr('d', that.changeArc);\n      that.valueArc.endAngle(\n        this.valueToRadians(\n          this.value,\n          this.options.max,\n          this.options.endAngle,\n          this.options.startAngle,\n          this.options.min,\n        ),\n      );\n      that.valueElem.attr('d', that.valueArc);\n    }\n\n    function dragInteraction() {\n      that.inDrag = true;\n      // @ts-ignore\n      const x = d3.event.x - that.options.size / 2;\n      // @ts-ignore\n      const y = d3.event.y - that.options.size / 2;\n      interaction(x, y, false);\n    }\n\n    function clickInteraction() {\n      that.inDrag = false;\n      // @ts-ignore\n      const coords = d3.mouse(this.parentNode);\n      const x = coords[0] - that.options.size / 2;\n      const y = coords[1] - that.options.size / 2;\n      interaction(x, y, true);\n    }\n\n    function interaction(x: any, y: any, isFinal: any) {\n      const arc = Math.atan(y / x) / (Math.PI / 180);\n      let delta;\n\n      if ((x >= 0 && y <= 0) || (x >= 0 && y >= 0)) {\n        delta = 90;\n      } else {\n        delta = 270;\n        if (that.options.startAngle < 0) {\n          delta = -90;\n        }\n      }\n\n      const radians = (delta + arc) * (Math.PI / 180);\n      that.value = that.radiansToValue(\n        radians,\n        that.options.max,\n        that.options.min,\n        that.options.endAngle,\n        that.options.startAngle,\n      );\n      if (that.value >= that.options.min && that.value <= that.options.max) {\n        that.value =\n          // eslint-disable-next-line no-bitwise\n          Math.round(~~((that.value < 0 ? -0.5 : 0.5) + that.value / that.options.step) * that.options.step * 100) /\n          100;\n        if (that.options.step < 1) {\n          that.value = Number(that.value.toFixed(1));\n        }\n        that.valueArc.endAngle(\n          that.valueToRadians(\n            that.value,\n            that.options.max,\n            that.options.endAngle,\n            that.options.startAngle,\n            that.options.min,\n          ),\n        );\n        that.valueElem.attr('d', that.valueArc);\n        if (isFinal) {\n          that.changeArc.endAngle(\n            that.valueToRadians(\n              that.value,\n              that.options.max,\n              that.options.endAngle,\n              that.options.startAngle,\n              that.options.min,\n            ),\n          );\n          that.changeElem.attr('d', that.changeArc);\n        }\n        if (that.options.displayInput) {\n          let v = that.label || that.value;\n          if (typeof that.options.inputFormatter === 'function') {\n            v = that.options.inputFormatter(v);\n          }\n          d3.select(that.element)\n            .select('#text')\n            .text(v + that.options.unit || '');\n        }\n      }\n      that.valueChange.emit(that.value);\n    }\n  }\n\n  /**\n   *   Set a value\n   */\n  setValue(newValue: any) {\n    if (!this.inDrag && this.value >= this.options.min && this.value <= this.options.max) {\n      const radians = this.valueToRadians(\n        newValue,\n        this.options.max,\n        this.options.endAngle,\n        this.options.startAngle,\n        this.options.min,\n      );\n      this.value =\n        // eslint-disable-next-line no-bitwise\n        Math.round(~~((newValue < 0 ? -0.5 : 0.5) + newValue / this.options.step) * this.options.step * 100) / 100;\n      if (this.options.step < 1) {\n        this.value = Number(this.value.toFixed(1));\n      }\n      this.changeArc.endAngle(radians);\n      d3.select(this.element)\n        .select('#changeArc')\n        .attr('d', this.changeArc);\n      this.valueArc.endAngle(radians);\n      d3.select(this.element)\n        .select('#valueArc')\n        .attr('d', this.valueArc);\n      if (this.options.displayInput) {\n        let v = this.label || this.value;\n        if (typeof this.options.inputFormatter === 'function') {\n          v = this.options.inputFormatter(v);\n        }\n        d3.select(this.element)\n          .select('#text')\n          .text(v + this.options.unit || '');\n      }\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { KnobComponent } from './knob.component';\n\n@NgModule({\n  imports: [\n  ],\n  declarations: [KnobComponent],\n  exports: [KnobComponent]\n})\nexport class KnobModule { }\n","/*\n * Public API Surface of knob\n */\n\nexport * from './lib/knob.component';\nexport * from './lib/knob.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}