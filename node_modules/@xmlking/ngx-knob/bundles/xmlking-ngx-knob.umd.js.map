{"version":3,"file":"xmlking-ngx-knob.umd.js","sources":["../../../projects/knob/src/lib/knob.component.ts","../../../projects/knob/src/lib/knob.module.ts","../../../projects/knob/src/public_api.ts","../../../projects/knob/src/xmlking-ngx-knob.ts"],"sourcesContent":["import { ElementRef, OnInit, Input, Output, EventEmitter, OnChanges, Component } from '@angular/core';\nimport * as d3 from 'd3';\nimport 'd3-selection-multi';\n// https://medium.com/inside-formstack/friends-dont-let-friends-import-lodash-incorrectly-ac40ca9e3bd5\nimport merge from 'lodash-es/merge';\n\nexport interface KnobOptions {\n  skin?: {\n    type: string;\n    width: number;\n    color: string;\n    spaceWidth: number;\n  };\n  animate?: {\n    enabled: true;\n    duration: number;\n    ease: string;\n  };\n  size: number;\n  startAngle: number;\n  endAngle: number;\n  unit: string;\n  displayInput: true;\n  inputFormatter: any;\n  readOnly: boolean;\n  trackWidth: number;\n  barWidth: number;\n  trackColor: string;\n  barColor: string;\n  prevBarColor: string;\n  textColor: string;\n  barCap: number;\n  trackCap: number;\n  fontSize: string;\n  fontWeigth: string;\n  fontFamily: string;\n  valueFormat?: string;\n  subText: {\n    enabled: false;\n    text: '';\n    fontFamily: string;\n    fontWeight: string;\n    color: string;\n    font: string;\n    offset: number;\n  };\n  bgColor: string;\n  bgFull: false;\n  scale: {\n    enabled: false;\n    type: string;\n    color: string;\n    width: number;\n    quantity: number;\n    height: number;\n    spaceWidth: number;\n  };\n  step: number;\n  displayPrevious: false;\n  min: number;\n  max: number;\n  dynamicOptions: false;\n}\n\n@Component({\n  template: '',\n  selector: 'ngx-knob'\n})\nexport class KnobComponent implements OnInit, OnChanges {\n  element: HTMLElement;\n  @Input()\n  value: number;\n  @Input()\n  label: number;\n  @Input()\n  options: any;\n  @Output()\n  valueChange = new EventEmitter<number>();\n\n  inDrag: Boolean;\n  bgArc: any;\n  trackArc: any;\n  changeArc: any;\n  valueArc: any;\n  interactArc: any;\n  hoopArc: any;\n  changeElem: any;\n  valueElem: any;\n  defaultOptions: KnobOptions;\n  animations: any;\n\n  constructor(private el: ElementRef) {\n    // All that need to be instanciated before bindings\n    this.element = this.el.nativeElement;\n    this.value = 0;\n    this.defaultOptions = {\n      skin: {\n        type: 'simple',\n        width: 10,\n        color: 'rgba(255,0,0,.5)',\n        spaceWidth: 5,\n      },\n      animate: {\n        enabled: true,\n        duration: 1000,\n        ease: 'bounce',\n      },\n      size: 200,\n      startAngle: 0,\n      endAngle: 360,\n      unit: '',\n      displayInput: true,\n      inputFormatter: function(v: any) {\n        return v;\n      },\n      readOnly: false,\n      trackWidth: 50,\n      barWidth: 50,\n      trackColor: 'rgba(0,0,0,0)',\n      barColor: 'rgba(255,0,0,.5)',\n      prevBarColor: 'rgba(0,0,0,0)',\n      textColor: '#222',\n      barCap: 0,\n      trackCap: 0,\n      fontSize: 'auto',\n      fontWeigth: '400',\n      fontFamily: 'Arial',\n      valueFormat: 'string',\n      subText: {\n        enabled: false,\n        text: '',\n        fontFamily: 'Arial',\n        fontWeight: 'normal',\n        color: 'gray',\n        font: 'auto',\n        offset: 0,\n      },\n      bgColor: '',\n      bgFull: false,\n      scale: {\n        enabled: false,\n        type: 'lines',\n        color: 'gray',\n        width: 4,\n        quantity: 20,\n        height: 10,\n        spaceWidth: 15,\n      },\n      step: 1,\n      displayPrevious: false,\n      min: 0,\n      max: 100,\n      dynamicOptions: false,\n    };\n\n    this.animations = {\n      linear: d3.easeLinear,\n      bounce: d3.easeBounce,\n    };\n  }\n\n  ngOnInit() {\n    this.inDrag = false;\n    // this.options = (<any>Object).assign(this.defaultOptions, this.options);\n    this.options = merge(this.defaultOptions, this.options);\n    this.draw();\n  }\n\n  ngOnChanges(changes: any) {\n    if (\n      this.defaultOptions != null &&\n      changes.options != null &&\n      changes.options.currentValue != null &&\n      this.value != null\n    ) {\n      this.options = merge(this.defaultOptions, changes.options.currentValue);\n      this.draw();\n    }\n\n    if (\n      this.defaultOptions != null &&\n      this.options != null &&\n      changes.value &&\n      changes.value.currentValue != null &&\n      changes.value.previousValue != null &&\n      changes.value.currentValue !== changes.value.previousValue\n    ) {\n      this.setValue(changes.value.currentValue);\n    }\n  }\n\n  /**\n   *   Convert from value to radians\n   */\n  valueToRadians(\n    value: number,\n    valueEnd: number,\n    angleEnd: number = 0,\n    angleStart: number = 0,\n    valueStart: number = 0,\n  ) {\n    valueEnd = valueEnd || 100;\n    valueStart = valueStart || 0;\n    angleEnd = angleEnd || 360;\n    angleStart = angleStart || 0;\n    return (Math.PI / 180) * (((value - valueStart) * (angleEnd - angleStart)) / (valueEnd - valueStart) + angleStart);\n  }\n\n  /**\n   *   Convert from radians to value\n   */\n  radiansToValue(radians: number, valueEnd: number, valueStart: number, angleEnd: number, angleStart: number) {\n    valueEnd = valueEnd || 100;\n    valueStart = valueStart || 0;\n    angleEnd = angleEnd || 360;\n    angleStart = angleStart || 0;\n    return (((180 / Math.PI) * radians - angleStart) * (valueEnd - valueStart)) / (angleEnd - angleStart) + valueStart;\n  }\n\n  /**\n   *   Create the arc\n   */\n  createArc(\n    innerRadius: number,\n    outerRadius: number,\n    startAngle?: number,\n    endAngle?: number,\n    cornerRadius?: number,\n  ): any {\n    const arc = d3\n      .arc()\n      .innerRadius(innerRadius)\n      .outerRadius(outerRadius)\n      .startAngle(startAngle)\n      .endAngle(endAngle)\n      .cornerRadius(cornerRadius);\n    return arc;\n  }\n\n  /**\n   *   Draw the arc\n   */\n  drawArc(svg: any, arc: any, label: string, style: any, click?: any, drag?: any) {\n    const elem = svg\n      .append('path')\n      .attr('id', label)\n      .attr('d', arc);\n\n    // eslint-disable-next-line guard-for-in\n    for (const key in style) {\n      elem.style(key, style[key]);\n    }\n\n    elem.attr('transform', 'translate(' + this.options.size / 2 + ', ' + this.options.size / 2 + ')');\n\n    if (this.options.readOnly === false) {\n      if (click) {\n        elem.on('click', click);\n      }\n      if (drag) {\n        elem.call(drag);\n      }\n    }\n    return elem;\n  }\n\n  /**\n   *   Create the arcs\n   */\n  createArcs() {\n    let outerRadius = parseInt((this.options.size / 2).toString(), 10);\n    const startAngle = this.valueToRadians(this.options.startAngle, 360);\n    const endAngle = this.valueToRadians(this.options.endAngle, 360);\n    if (this.options.scale.enabled) {\n      outerRadius -= this.options.scale.width + this.options.scale.spaceWidth;\n    }\n    let trackInnerRadius = outerRadius - this.options.trackWidth;\n    let changeInnerRadius = outerRadius - this.options.barWidth;\n    let valueInnerRadius = outerRadius - this.options.barWidth;\n    // interactInnerRadius = outerRadius - this.options.barWidth,\n    const interactInnerRadius = 1;\n\n    let trackOuterRadius = outerRadius;\n    let changeOuterRadius = outerRadius;\n    let valueOuterRadius = outerRadius;\n    let interactOuterRadius = outerRadius;\n    let diff;\n\n    if (this.options.barWidth > this.options.trackWidth) {\n      diff = (this.options.barWidth - this.options.trackWidth) / 2;\n      trackInnerRadius -= diff;\n      trackOuterRadius -= diff;\n    } else if (this.options.barWidth < this.options.trackWidth) {\n      diff = (this.options.trackWidth - this.options.barWidth) / 2;\n      changeOuterRadius -= diff;\n      valueOuterRadius -= diff;\n      changeInnerRadius -= diff;\n      valueInnerRadius -= diff;\n      // interactInnerRadius = outerRadius - this.options.trackWidth;\n    }\n    if (this.options.bgColor) {\n      if (this.options.bgFull) {\n        this.bgArc = this.createArc(0, outerRadius, 0, Math.PI * 2);\n      } else {\n        this.bgArc = this.createArc(0, outerRadius, startAngle, endAngle);\n      }\n    }\n    if (this.options.skin.type === 'tron') {\n      trackOuterRadius = trackOuterRadius - this.options.skin.width - this.options.skin.spaceWidth;\n      changeOuterRadius = changeOuterRadius - this.options.skin.width - this.options.skin.spaceWidth;\n      valueOuterRadius = valueOuterRadius - this.options.skin.width - this.options.skin.spaceWidth;\n      interactOuterRadius = interactOuterRadius - this.options.skin.width - this.options.skin.spaceWidth;\n      this.hoopArc = this.createArc(outerRadius - this.options.skin.width, outerRadius, startAngle, endAngle);\n    }\n\n    this.trackArc = this.createArc(trackInnerRadius, trackOuterRadius, startAngle, endAngle, this.options.trackCap);\n    this.changeArc = this.createArc(changeInnerRadius, changeOuterRadius, startAngle, startAngle, this.options.barCap);\n    this.valueArc = this.createArc(valueInnerRadius, valueOuterRadius, startAngle, startAngle, this.options.barCap);\n    this.interactArc = this.createArc(interactInnerRadius, interactOuterRadius, startAngle, endAngle);\n  }\n\n  /**\n   *   Draw the arcs\n   */\n  drawArcs(clickInteraction: any, dragBehavior: any) {\n    let fontFamily = '';\n    const svg = d3\n      .select(this.element)\n      .append('svg')\n      .attr('width', this.options.size)\n      .attr('height', this.options.size);\n\n    if (this.options.bgColor) {\n      this.drawArc(svg, this.bgArc, 'bgArc', { fill: this.options.bgColor });\n    }\n\n    if (this.options.displayInput) {\n      let fontSize: string = this.options.size * 0.2 + 'px';\n      if (this.options.fontSize !== 'auto') {\n        fontSize = this.options.fontSize + 'px';\n      }\n      if (this.options.step < 1) {\n        this.value = Number(this.value.toFixed(1));\n      }\n      let v = this.label || this.value;\n      if (typeof this.options.inputFormatter === 'function') {\n        v = this.options.inputFormatter(v);\n      }\n\n      if (this.options.fontFamily !== 'Arial') {\n        fontFamily = this.options.fontFamily;\n      }\n      let fontWeigth = '';\n      if (this.options.fontWeigth !== '400') {\n        fontWeigth = this.options.fontWeigth;\n      }\n      svg\n        .append('text')\n        .attr('id', 'text')\n        .attr('class', 'text-value')\n        .attr('text-anchor', 'middle')\n        .attr('font-size', fontSize)\n        .attr('font-weight', fontWeigth)\n        .attr('font-family', fontFamily)\n        .style('fill', this.options.textColor)\n        .text(v + this.options.unit || '')\n        .attr(\n          'transform',\n          'translate(' + this.options.size / 2 + ', ' + (this.options.size / 2 + this.options.size * 0.06) + ')',\n        );\n\n      if (this.options.subText.enabled) {\n        fontSize = this.options.size * 0.07 + 'px';\n        if (this.options.subText.font !== 'auto') {\n          fontSize = this.options.subText.font + 'px';\n        }\n\n        if (this.options.subText.fontFamily !== 'Arial') {\n          fontFamily = this.options.subText.fontFamily;\n        }\n        let fontWeight = '';\n        if (this.options.subText.fontWeight !== 'normal') {\n          fontWeight = this.options.subText.fontWeight;\n        }\n        svg\n          .append('text')\n          .attr('class', 'sub-text')\n          .attr('text-anchor', 'middle')\n          .attr('font-size', fontSize)\n          .attr('font-family', fontFamily)\n          .attr('font-weight', fontWeight)\n          .style('fill', this.options.subText.color)\n          .text(this.options.subText.text)\n          .attr(\n            'transform',\n            'translate(' +\n            '' +\n            this.options.size / 2 +\n            ', ' +\n            (this.options.size / 2 + this.options.size * 0.15 + this.options.subText.offset) +\n            ')',\n          );\n      }\n    }\n    if (this.options.scale.enabled) {\n      let radius: number;\n      let quantity: number;\n      let data;\n      let count = 0;\n      let angle = 0;\n      const startRadians = this.valueToRadians(\n        this.options.min,\n        this.options.max,\n        this.options.endAngle,\n        this.options.startAngle,\n        this.options.min,\n      );\n      const endRadians = this.valueToRadians(\n        this.options.max,\n        this.options.max,\n        this.options.endAngle,\n        this.options.startAngle,\n        this.options.min,\n      );\n      let diff = 0;\n      if (this.options.startAngle !== 0 || this.options.endAngle !== 360) {\n        diff = 1;\n      }\n      if (this.options.scale.type === 'dots') {\n        const width = this.options.scale.width;\n        radius = this.options.size / 2 - width;\n        quantity = this.options.scale.quantity;\n        const offset: number = radius + this.options.scale.width;\n        data = d3.range(quantity).map(function() {\n          angle = count * (endRadians - startRadians) - Math.PI / 2 + startRadians;\n          count = count + 1 / (quantity - diff);\n          return {\n            cx: offset + Math.cos(angle) * radius,\n            cy: offset + Math.sin(angle) * radius,\n            r: width,\n          };\n        });\n        svg\n          .selectAll('circle')\n          .data(data)\n          .enter()\n          .append('circle')\n          // @ts-ignore\n          .attrs({\n            r: function(d: { r: any }) {\n              return d.r;\n            },\n            cx: function(d: { cx: number }) {\n              return d.cx;\n            },\n            cy: function(d: { cy: number }) {\n              return d.cy;\n            },\n            fill: this.options.scale.color,\n          });\n      } else if (this.options.scale.type === 'lines') {\n        const height = this.options.scale.height;\n        radius = this.options.size / 2;\n        quantity = this.options.scale.quantity;\n        data = d3.range(quantity).map(function() {\n          angle = count * (endRadians - startRadians) - Math.PI / 2 + startRadians;\n          count = count + 1 / (quantity - diff);\n          return {\n            x1: radius + Math.cos(angle) * radius,\n            y1: radius + Math.sin(angle) * radius,\n            x2: radius + Math.cos(angle) * (radius - height),\n            y2: radius + Math.sin(angle) * (radius - height),\n          };\n        });\n\n        svg\n          .selectAll('line')\n          .data(data)\n          .enter()\n          .append('line')\n          // @ts-ignore\n          .attrs({\n            x1: function(d: { x1: number }) {\n              return d.x1;\n            },\n            y1: function(d: { y1: number }) {\n              return d.y1;\n            },\n            x2: function(d: { x2: number }) {\n              return d.x2;\n            },\n            y2: function(d: { y2: number }) {\n              return d.y2;\n            },\n            'stroke-width': this.options.scale.width,\n            stroke: this.options.scale.color,\n          });\n      }\n    }\n    if (this.options.skin.type === 'tron') {\n      this.drawArc(svg, this.hoopArc, 'hoopArc', { fill: this.options.skin.color });\n    }\n    this.drawArc(svg, this.trackArc, 'trackArc', { fill: this.options.trackColor });\n    if (this.options.displayPrevious) {\n      this.changeElem = this.drawArc(svg, this.changeArc, 'changeArc', { fill: this.options.prevBarColor });\n    } else {\n      this.changeElem = this.drawArc(svg, this.changeArc, 'changeArc', { 'fill-opacity': 0 });\n    }\n    this.valueElem = this.drawArc(svg, this.valueArc, 'valueArc', { fill: this.options.barColor });\n    let cursor = 'pointer';\n    if (this.options.readOnly) {\n      cursor = 'default';\n    }\n    this.drawArc(\n      svg,\n      this.interactArc,\n      'interactArc',\n      { 'fill-opacity': 0, cursor: cursor },\n      clickInteraction,\n      dragBehavior,\n    );\n  }\n\n  /**\n   *   Draw knob component\n   */\n  draw() {\n    d3.select(this.element)\n      .select('svg')\n      .remove();\n    const that = this;\n\n    that.createArcs();\n\n    const dragBehavior = d3\n      .drag()\n      .on('drag', dragInteraction)\n      .on('end', clickInteraction);\n\n    that.drawArcs(clickInteraction, dragBehavior);\n\n    if (that.options.animate.enabled) {\n      // that.valueElem.transition().ease(that.options.animate.ease).duration(that.options.animate.duration).tween('', function () {\n      that.valueElem\n        .transition()\n        .ease(that.animations[that.options.animate.ease])\n        .duration(that.options.animate.duration)\n        .tween('', function() {\n          const i = d3.interpolate(\n            that.valueToRadians(that.options.startAngle, 360),\n            that.valueToRadians(\n              that.value,\n              that.options.max,\n              that.options.endAngle,\n              that.options.startAngle,\n              that.options.min,\n            ),\n          );\n          return function(t: any) {\n            const val = i(t);\n            that.valueElem.attr('d', that.valueArc.endAngle(val));\n            that.changeElem.attr('d', that.changeArc.endAngle(val));\n          };\n        });\n    } else {\n      that.changeArc.endAngle(\n        this.valueToRadians(\n          this.value,\n          this.options.max,\n          this.options.endAngle,\n          this.options.startAngle,\n          this.options.min,\n        ),\n      );\n      that.changeElem.attr('d', that.changeArc);\n      that.valueArc.endAngle(\n        this.valueToRadians(\n          this.value,\n          this.options.max,\n          this.options.endAngle,\n          this.options.startAngle,\n          this.options.min,\n        ),\n      );\n      that.valueElem.attr('d', that.valueArc);\n    }\n\n    function dragInteraction() {\n      that.inDrag = true;\n      // @ts-ignore\n      const x = d3.event.x - that.options.size / 2;\n      // @ts-ignore\n      const y = d3.event.y - that.options.size / 2;\n      interaction(x, y, false);\n    }\n\n    function clickInteraction() {\n      that.inDrag = false;\n      // @ts-ignore\n      const coords = d3.mouse(this.parentNode);\n      const x = coords[0] - that.options.size / 2;\n      const y = coords[1] - that.options.size / 2;\n      interaction(x, y, true);\n    }\n\n    function interaction(x: any, y: any, isFinal: any) {\n      const arc = Math.atan(y / x) / (Math.PI / 180);\n      let delta;\n\n      if ((x >= 0 && y <= 0) || (x >= 0 && y >= 0)) {\n        delta = 90;\n      } else {\n        delta = 270;\n        if (that.options.startAngle < 0) {\n          delta = -90;\n        }\n      }\n\n      const radians = (delta + arc) * (Math.PI / 180);\n      that.value = that.radiansToValue(\n        radians,\n        that.options.max,\n        that.options.min,\n        that.options.endAngle,\n        that.options.startAngle,\n      );\n      if (that.value >= that.options.min && that.value <= that.options.max) {\n        that.value =\n          // eslint-disable-next-line no-bitwise\n          Math.round(~~((that.value < 0 ? -0.5 : 0.5) + that.value / that.options.step) * that.options.step * 100) /\n          100;\n        if (that.options.step < 1) {\n          that.value = Number(that.value.toFixed(1));\n        }\n        that.valueArc.endAngle(\n          that.valueToRadians(\n            that.value,\n            that.options.max,\n            that.options.endAngle,\n            that.options.startAngle,\n            that.options.min,\n          ),\n        );\n        that.valueElem.attr('d', that.valueArc);\n        if (isFinal) {\n          that.changeArc.endAngle(\n            that.valueToRadians(\n              that.value,\n              that.options.max,\n              that.options.endAngle,\n              that.options.startAngle,\n              that.options.min,\n            ),\n          );\n          that.changeElem.attr('d', that.changeArc);\n        }\n        if (that.options.displayInput) {\n          let v = that.label || that.value;\n          if (typeof that.options.inputFormatter === 'function') {\n            v = that.options.inputFormatter(v);\n          }\n          d3.select(that.element)\n            .select('#text')\n            .text(v + that.options.unit || '');\n        }\n      }\n      that.valueChange.emit(that.value);\n    }\n  }\n\n  /**\n   *   Set a value\n   */\n  setValue(newValue: any) {\n    if (!this.inDrag && this.value >= this.options.min && this.value <= this.options.max) {\n      const radians = this.valueToRadians(\n        newValue,\n        this.options.max,\n        this.options.endAngle,\n        this.options.startAngle,\n        this.options.min,\n      );\n      this.value =\n        // eslint-disable-next-line no-bitwise\n        Math.round(~~((newValue < 0 ? -0.5 : 0.5) + newValue / this.options.step) * this.options.step * 100) / 100;\n      if (this.options.step < 1) {\n        this.value = Number(this.value.toFixed(1));\n      }\n      this.changeArc.endAngle(radians);\n      d3.select(this.element)\n        .select('#changeArc')\n        .attr('d', this.changeArc);\n      this.valueArc.endAngle(radians);\n      d3.select(this.element)\n        .select('#valueArc')\n        .attr('d', this.valueArc);\n      if (this.options.displayInput) {\n        let v = this.label || this.value;\n        if (typeof this.options.inputFormatter === 'function') {\n          v = this.options.inputFormatter(v);\n        }\n        d3.select(this.element)\n          .select('#text')\n          .text(v + this.options.unit || '');\n      }\n    }\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { KnobComponent } from './knob.component';\n\n@NgModule({\n  imports: [\n  ],\n  declarations: [KnobComponent],\n  exports: [KnobComponent]\n})\nexport class KnobModule { }\n","/*\n * Public API Surface of knob\n */\n\nexport * from './lib/knob.component';\nexport * from './lib/knob.module';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":["EventEmitter","d3","merge","Component","ElementRef","Input","Output","NgModule"],"mappings":"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"}