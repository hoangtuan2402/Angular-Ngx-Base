!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("immer")):"function"==typeof define&&define.amd?define("@ngxs-labs/immer-adapter",["exports","immer"],e):e((t["ngxs-labs"]=t["ngxs-labs"]||{},t["ngxs-labs"]["immer-adapter"]={}),t.immer)}(this,function(t,i){"use strict";function n(t){return function e(t){return t!==undefined&&null!==t}(t)&&"function"==typeof t.getState&&"function"==typeof t.setState}function r(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,o,i=n.call(t),a=[];try{for(;(void 0===e||0<e--)&&!(r=i.next()).done;)a.push(r.value)}catch(u){o={error:u}}finally{try{r&&!r.done&&(n=i["return"])&&n.call(i)}finally{if(o)throw o.error}}return a}function a(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(r(arguments[e]));return t}var u=function(){function e(t){this.ctx=t,this.frozenState=null,e.autobindStateContext(this)}return e.autobindStateContext=function(t){var e,n;try{for(var r=function a(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}(Object.getOwnPropertyNames(Object.getPrototypeOf(t))),o=r.next();!o.done;o=r.next()){var i=o.value;"constructor"!==i&&"function"==typeof t[i]&&(t[i]=t[i].bind(t))}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=r["return"])&&n.call(r)}finally{if(e)throw e.error}}},e.prototype.getState=function(){return this.frozenState=i.createDraft(this.ctx.getState()),this.frozenState},e.prototype.setState=function(t){var e;if("function"==typeof t){var n=void 0,r=i.createDraft(this.ctx.getState()),o=t(r);if(this.frozenState===o)n=i.finishDraft(this.frozenState),i.finishDraft(r);else r!==o?(n=o,i.finishDraft(r)):n=i.finishDraft(o);e=n}else e=i.finishDraft(t);return this.frozenState=null,this.ctx.setState(e)},e.prototype.patchState=function(t){return this.ctx.patchState(i.finishDraft(t))},e.prototype.dispatch=function(t){return this.ctx.dispatch(t)},e}();t.ImmutableContext=function e(){return function(t,e,n){var o=n.value;return n.value=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return o.apply(this,a([new u(t),e],n))},n}},t.ImmutableSelector=function o(){return function(t,e,n){var r=n.value;return n.value=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return r.apply(this,a([i.createDraft(t)],e))},n}},t.produce=function f(t,e){if(!n(t))throw new Error("You should provide `StateContext` object as the first argument of the `produce` function");return t.setState(function(t){return i.produce(t,e)})},t.Mutation=function c(){return function(t,e,n){var o=n.value;return n.value=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return o.apply(this,a([new u(t),e],n))},n}},Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=ngxs-labs-immer-adapter.umd.min.js.map